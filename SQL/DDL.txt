-- Department Table
CREATE TABLE Department (
    DNUM INT PRIMARY KEY,
    DName VARCHAR(100) NOT NULL
);


CREATE TABLE Department_Location (
    DNUM INT,
    Location VARCHAR(100),
    PRIMARY KEY (DNUM, Location),
    FOREIGN KEY (DNUM) REFERENCES Department(DNUM)
);

CREATE TABLE Employee (
    SSN INT PRIMARY KEY,
    Fname VARCHAR(50) NOT NULL,
    Lname VARCHAR(50) NOT NULL,
    BirthDate DATE,
    Gender CHAR(1),
    DNUM INT,
    FOREIGN KEY (DNUM) REFERENCES Department(DNUM)
);

CREATE TABLE Project (
    PNumber INT PRIMARY KEY,
    PName VARCHAR(100) NOT NULL,
    Location VARCHAR(100),
    City VARCHAR(100),
    DNUM INT,
    FOREIGN KEY (DNUM) REFERENCES Department(DNUM)
);


CREATE TABLE Works_On (
    SSN INT,
    PNumber INT,
    WorkingHours DECIMAL(5,2),
    PRIMARY KEY (SSN, PNumber),
    FOREIGN KEY (SSN) REFERENCES Employee(SSN),
    FOREIGN KEY (PNumber) REFERENCES Project(PNumber)
);


CREATE TABLE Manages (
    DNUM INT PRIMARY KEY,
    SSN INT,
    HireDate DATE,
    FOREIGN KEY (DNUM) REFERENCES Department(DNUM),
    FOREIGN KEY (SSN) REFERENCES Employee(SSN)
);


CREATE TABLE Supervision (
    SupervisorSSN INT,
    SubordinateSSN INT,
    PRIMARY KEY (SupervisorSSN, SubordinateSSN),
    FOREIGN KEY (SupervisorSSN) REFERENCES Employee(SSN),
    FOREIGN KEY (SubordinateSSN) REFERENCES Employee(SSN)
);

CREATE TABLE Dependent (
    SSN INT,
    DependentName VARCHAR(50),
    Gender CHAR(1),
    BirthDate DATE,
    PRIMARY KEY (SSN, DependentName),
    FOREIGN KEY (SSN) REFERENCES Employee(SSN) ON DELETE CASCADE
);